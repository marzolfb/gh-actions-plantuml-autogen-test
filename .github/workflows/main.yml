name: Autogenerate & commit diagram image

on: [push]

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v1
    - name: PlantUML CLI
      uses: lokkju/github-action-plantuml@v0.0.1
      with:
        args: ./sample.puml -o ./
    - name: Commit changes
      uses: EndBug/add-and-commit@v2
      with:
        author_name: Bret Marzolf
        author_email: marzolfb@gmail.com
        cwd: "."
        message: "Autogenerated plantuml diagram image"
        path: "."
        pattern: "*.png"
        force: false
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  
